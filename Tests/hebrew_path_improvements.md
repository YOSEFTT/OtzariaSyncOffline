# שיפורים לטיפול בנתיבים עם עברית

## הבעיות שזוהו:
1. **קידוד קבצים** - השימוש ב-`decode("utf-8", errors="ignore")` גרם לאובדן מידע
2. **ביטויים רגולריים** - לא זיהו נכון נתיבים עם עברית
3. **טיפול בנתיבים** - השימוש ב-`os.path` במקום `pathlib` גרם לבעיות

## השיפורים שבוצעו:

### 1. זיהוי אוטומטי של קידוד קבצים
- הוספת ספריית `chardet` לזיהוי אוטומטי של קידוד
- fallback לקידודים נפוצים: UTF-8, UTF-16, CP1255, Windows-1255, ISO-8859-8
- טיפול בשגיאות קידוד עם `errors="replace"` במקום `"ignore"`

### 2. שיפור ביטויים רגולריים
- הוספת דגל `re.UNICODE` לתמיכה בעברית
- מספר תבניות חיפוש לגמישות רבה יותר
- טיפול במרכאות בודדות וכפולות

### 3. שימוש ב-pathlib
- החלפת `os.path` ב-`pathlib.Path` לטיפול נכון בנתיבים
- פונקציית `safe_path_handling()` לטיפול בטוח בנתיבים
- נרמול אוטומטי של נתיבים

### 4. פונקציות עזר חדשות
```python
def safe_path_handling(path_str):
    """טיפול בטוח בנתיבים עם תווים בעברית"""

def detect_file_encoding(file_path):
    """זיהוי קידוד קובץ עם fallback לקידודים נפוצים"""
```

### 5. שיפור validate_otzaria_folder
- שימוש ב-pathlib במקום os.path
- טיפול בשגיאות טוב יותר
- בדיקות קיום קבצים מדויקות יותר

## יתרונות השיפורים:
- **תאימות טובה יותר** עם שמות משתמשים בעברית
- **זיהוי מדויק יותר** של קבצי העדפות
- **יציבות רבה יותר** במערכות שונות
- **fallback mechanisms** למקרי קצה

## הוראות התקנה:
אם ספריית `chardet` לא מותקנת:
```bash
pip install chardet
```

הקוד יעבוד גם בלי `chardet` עם fallback לקידודים נפוצים.